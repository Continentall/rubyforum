<% provide :page_title, t('menu.topics') %> <!--provide сохраняет "Обсуждения" в :page_title-->
<% currently_at t('menu.topics') %>
<h1 class="text-center mb-4"><%= t('menu.topics') %></h1>

<%= link_to t('topics.new.topic'), new_topic_path, class: 'btn btn-success btn-lg mb-3'%>

<%= pagination @pagy %> 

<% @topics.each do |topic|%> <!--Цикл each проходит по всем записям из @topics и дробит их на переменные topic-->
    <article class="card my-3">
        <div class="card-body">
            <h4 class="mb-0">
                <%= topic.title%> <!--передача заголовка topic'а в h2 тег-->
            </h4>
            <section class="card-text">
                <time datetime="<%= topic.formatted_created_at %>"> <!-- strftime - Форматирует дату и время по шаблону. datetime - применяет разметку на содержимое блока-->
                    <small class="text-secondary"><%= topic.formatted_created_at %></small>
                </time>
                <p class="mt-3">
                    <%= truncate strip_tags(topic.body), length: 140 %> <!--передача заголовка topic'а в p тег-->
                    <!-- strip_tags  - хелпер который удаляет с текста все тэги html -->
                    <!-- truncate  - хелпер который обрезает текст до указаной длины при отображении -->
                    <br>
                </p>
                <p class="float-end mb-0">
                    <%= link_to t('topics.show.more'), topic_path(topic.id), class: 'btn btn-success' %> <!-- В перфиксах очень просто запуться, смотри их в rails/routes -->
                    <%= link_to t('topics.show.edit'), edit_topic_path(topic.id), class: 'btn btn-secondary' %> <!--Префикс edit_topic_path генерируется сам, но ему еще надо передать топик :ID -->  
                    <%= link_to t('topics.show.delete'), topic_path(topic.id),class: 'btn btn-danger', data: {method: :delete, confirm: t('.confirm')} %> <!-- В этому случае не нужно дать POST запрос на страницу вопросов, а нужно дать DELETE запрос  -->
                    <!-- Потому что метод контроллера destroy вызывается только при получении DELETE запроса на страницу всех вопросов -->
                </p>
            </section>
        </div>
    </article>
<% end %>

<%= pagination @pagy %>
<!-- два знака ровно выведут содержимое без экранирования строки -->